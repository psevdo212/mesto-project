(()=>{"use strict";function e(e){e.classList.add("popup_opened"),document.addEventListener("click",r),document.addEventListener("keydown",n)}function t(){document.querySelector(".popup_opened").classList.remove("popup_opened"),document.removeEventListener("keydown",n)}function n(e){"Escape"===e.key&&t()}function r(e){var n=document.querySelector(".popup_opened"),r=e.composedPath();r.includes(n)&&!r.includes(n.querySelector(".popup__form"))&&t()}function o(t,n){var r=document.querySelector("#place-template").content.querySelector(".place").cloneNode(!0);return r.querySelector(".place__title").textContent=t,r.querySelector(".place__image").src=n,r.querySelector(".place__image").alt=t,r.querySelector(".place__like").addEventListener("click",(function(e){e.target.classList.toggle("place__like_active")})),r.querySelector(".place__image").addEventListener("click",(function(){document.querySelector(".image-big__image").src=n,document.querySelector(".image-big__image").alt=t,document.querySelector(".image-big__figcaption").textContent=t,e(d)})),r.querySelector(".place__delete").addEventListener("click",(function(){r.closest(".place").remove()})),r}var c=document.querySelector(".popup_newplace"),i=document.querySelector(".profile__title"),a=document.querySelector(".profile__subtitle"),u=document.querySelector(".popup"),l=document.getElementById("username"),s=document.getElementById("description"),d=document.querySelector(".image-big"),p=Array.from(document.querySelectorAll(".popup__close-button")),m=document.querySelector(".profile__edit-button"),v=document.querySelector(".profile__add-button"),y=document.querySelector(".places");function _(e){e.preventDefault();var n=l.value,r=s.value;i.textContent=n,a.textContent=r,t(),u.removeEventListener("submit",_)}function f(e){e.preventDefault();var n=document.querySelector("#place-name"),r=document.querySelector("#image-link");S(y,o(n.value,r.value)),t(),e.target.reset(),c.removeEventListener("submit",f)}function S(e,t){e.prepend(t)}!function(e){function t(t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(t)?(n.disabled=!1,n.classList.remove(e.inactiveButtonClass)):(n.disabled=!0,n.classList.add(e.inactiveButtonClass))}Array.from(document.querySelectorAll(e.formSelector)).forEach((function(n){n.addEventListener("submit",(function(e){e.preventDefault()})),function(n){var r=Array.from(n.querySelectorAll(e.inputSelector)),o=n.querySelector(e.submitButtonSelector);t(r,o),r.forEach((function(c){c.addEventListener("input",(function(){(function(t,n){n.validity.patternMismatch?n.setCustomValidity(n.dataset.errorMessage):n.setCustomValidity(""),n.validity.valid?function(t,n){var r=t.querySelector(".".concat(n.id,"-error"));n.classList.remove(e.inputErrorClass),r.classList.remove(e.errorClass),r.textContent=" "}(t,n):function(t,n,r){var o=t.querySelector(".".concat(n.id,"-error"));n.classList.add(e.inputErrorClass),o.textContent=r,o.classList.add(e.errorClass)}(t,n,n.validationMessage)})(n,c),t(r,o)}))}))}(n)}))}({formSelector:".popup__form",inputSelector:".popup__item",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"popup__item_type_error",errorClass:"popup__input-error_active"}),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){S(y,o(e.name,e.link))})),p.forEach((function(e){e.addEventListener("click",(function(e){t()}))})),m.addEventListener("click",(function(){l.value=i.textContent,s.value=a.textContent,e(u),u.addEventListener("submit",_)})),v.addEventListener("click",(function(){e(c),c.addEventListener("submit",f)}))})();